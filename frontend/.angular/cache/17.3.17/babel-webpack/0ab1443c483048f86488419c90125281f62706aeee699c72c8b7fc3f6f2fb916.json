{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../shared/services/transaction.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction CalendarViewComponent_div_44_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 23);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const day_r2 = i0.…µ…µnextContext(2).$implicit;\n    const ctx_r2 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", ctx_r2.formatShortCurrency(day_r2.income), \" \");\n  }\n}\nfunction CalendarViewComponent_div_44_div_3_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 24);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const day_r2 = i0.…µ…µnextContext(2).$implicit;\n    const ctx_r2 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", ctx_r2.formatShortCurrency(-day_r2.expense), \" \");\n  }\n}\nfunction CalendarViewComponent_div_44_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 20);\n    i0.…µ…µtemplate(1, CalendarViewComponent_div_44_div_3_div_1_Template, 2, 1, \"div\", 21)(2, CalendarViewComponent_div_44_div_3_div_2_Template, 2, 1, \"div\", 22);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const day_r2 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", day_r2.income > 0);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", day_r2.expense > 0);\n  }\n}\nfunction CalendarViewComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 17);\n    i0.…µ…µlistener(\"click\", function CalendarViewComponent_div_44_Template_div_click_0_listener() {\n      const day_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.onDayClick(day_r2));\n    });\n    i0.…µ…µelementStart(1, \"div\", 18);\n    i0.…µ…µtext(2);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(3, CalendarViewComponent_div_44_div_3_Template, 3, 2, \"div\", 19);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const day_r2 = ctx.$implicit;\n    i0.…µ…µclassProp(\"today\", day_r2.isToday)(\"other-month\", !day_r2.isCurrentMonth)(\"has-data\", day_r2.income > 0 || day_r2.expense > 0);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(day_r2.dayOfMonth);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", day_r2.isCurrentMonth && (day_r2.income > 0 || day_r2.expense > 0));\n  }\n}\nexport class CalendarViewComponent {\n  constructor(transactionService, router, route) {\n    this.transactionService = transactionService;\n    this.router = router;\n    this.route = route;\n    this.currentDate = new Date();\n    this.currentMonth = new Date().getMonth();\n    this.currentYear = new Date().getFullYear();\n    this.calendarDays = [];\n    this.selectedDay = null;\n    this.isLoading = false;\n    this.errorMessage = '';\n    this.todaySummary = {\n      date: new Date().toISOString().split('T')[0],\n      income: 0,\n      expense: 0,\n      net: 0\n    };\n  }\n  ngOnInit() {\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n    this.routerSubscription = this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(() => {\n      this.route.queryParams.subscribe(params => {\n        if (params['refresh'] === 'true') {\n          console.log('Calendar View: Ê£ÄÊµãÂà∞Âà∑Êñ∞ÂèÇÊï∞ÔºåÈáçÊñ∞Âä†ËΩΩ...');\n          this.loadMonthData();\n        }\n      });\n    });\n    this.route.queryParams.subscribe(params => {\n      if (params['refresh'] === 'true') {\n        console.log('Calendar View: ÂàùÂßãÂà∑Êñ∞...');\n        this.loadMonthData();\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.routerSubscription?.unsubscribe();\n  }\n  updateCurrentMonthYear() {\n    this.currentMonth = this.currentDate.getMonth();\n    this.currentYear = this.currentDate.getFullYear();\n  }\n  loadMonthData() {\n    this.isLoading = true;\n    this.errorMessage = '';\n    const year = this.currentDate.getFullYear();\n    const month = this.currentDate.getMonth() + 1;\n    console.log(`Calendar View: Âä†ËΩΩ ${year}-${month} ÁöÑÊï∞ÊçÆ...`);\n    this.transactionService.getTransactionsByMonth(year, month).subscribe({\n      next: transactions => {\n        console.log(`Calendar View: Âä†ËΩΩÂà∞ ${transactions.length} Êù°‰∫§Êòì`);\n        console.log('Calendar View: ‰∫§ÊòìÊï∞ÊçÆÁ§∫‰æã:', transactions[0]);\n        this.generateCalendar(transactions);\n        this.calculateTodaySummary(transactions);\n        this.isLoading = false;\n      },\n      error: error => {\n        console.error('Calendar View: Âä†ËΩΩÂ§±Ë¥•:', error);\n        this.errorMessage = 'Êó†Ê≥ïÂä†ËΩΩÊúà‰ªΩÊï∞ÊçÆ';\n        this.generateCalendar([]);\n        this.isLoading = false;\n      }\n    });\n  }\n  calculateTodaySummary(transactions) {\n    const today = new Date();\n    const todayStr = this.formatDateToString(today);\n    let income = 0;\n    let expense = 0;\n    transactions.forEach(t => {\n      // üîß ‰øÆÂ§çÔºö‰ΩøÁî® parseLocalDate ÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢ò\n      const transDateStr = this.parseLocalDate(t.transactionDate);\n      if (transDateStr === todayStr) {\n        if (t.transactionType === 'INCOME') {\n          income += t.amount;\n        } else {\n          expense += t.amount;\n        }\n      }\n    });\n    this.todaySummary = {\n      date: todayStr,\n      income: income,\n      expense: expense,\n      net: income - expense\n    };\n    console.log('Calendar View: ‰ªäÊó•Ê±áÊÄª', this.todaySummary);\n  }\n  /**\n   * ÁîüÊàêÊó•ÂéÜ - ‰øÆÂ§çÊó∂Âå∫ÈóÆÈ¢ò\n   */\n  generateCalendar(transactions) {\n    console.log('Calendar View: ÁîüÊàêÊó•ÂéÜ...');\n    const year = this.currentDate.getFullYear();\n    const month = this.currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const firstDayOfWeek = firstDay.getDay();\n    const daysInMonth = lastDay.getDate();\n    const totalDays = Math.ceil((firstDayOfWeek + daysInMonth) / 7) * 7;\n    this.calendarDays = [];\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    for (let i = 0; i < totalDays; i++) {\n      const dayNumber = i - firstDayOfWeek + 1;\n      const date = new Date(year, month, dayNumber);\n      const isCurrentMonth = dayNumber >= 1 && dayNumber <= daysInMonth;\n      // üîß ÂÖ≥ÈîÆ‰øÆÂ§çÔºö‰ΩøÁî®Êú¨Âú∞Êó•ÊúüÂ≠óÁ¨¶‰∏≤ÊØîËæÉ\n      const dateStr = this.formatDateToString(date);\n      const dayTransactions = transactions.filter(t => {\n        // üîß ‰øÆÂ§çÔºöÁõ¥Êé•‰ΩøÁî® transactionDate Â≠óÁ¨¶‰∏≤Ôºå‰∏çËΩ¨Êç¢‰∏∫ Date\n        const transDateStr = this.parseLocalDate(t.transactionDate);\n        return transDateStr === dateStr;\n      });\n      let totalIncome = 0;\n      let totalExpense = 0;\n      dayTransactions.forEach(t => {\n        if (t.transactionType === 'INCOME') {\n          totalIncome += t.amount;\n        } else {\n          totalExpense += t.amount;\n        }\n      });\n      const calendarDay = {\n        date: date,\n        dayNumber: date.getDate(),\n        dayOfMonth: date.getDate(),\n        dayOfWeek: date.getDay(),\n        totalIncome: totalIncome,\n        totalExpense: totalExpense,\n        income: totalIncome,\n        expense: totalExpense,\n        netAmount: totalIncome - totalExpense,\n        transactions: dayTransactions,\n        isToday: date.getTime() === today.getTime(),\n        isCurrentMonth: isCurrentMonth,\n        isSelected: false\n      };\n      this.calendarDays.push(calendarDay);\n    }\n    console.log('Calendar View: Êó•ÂéÜÁîüÊàêÂÆåÊàêÔºåÂÖ±', this.calendarDays.length, 'Â§©');\n    // ÁªüËÆ°ÊúâÊï∞ÊçÆÁöÑÂ§©Êï∞\n    const daysWithData = this.calendarDays.filter(d => d.transactions.length > 0).length;\n    console.log('Calendar View: Êúâ‰∫§ÊòìÁöÑÂ§©Êï∞:', daysWithData);\n  }\n  /**\n   * üîß Êñ∞Â¢ûÔºöËß£ÊûêÊú¨Âú∞Êó•ÊúüÔºàÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢òÔºâ\n   *\n   * ÂêéÁ´ØËøîÂõû: \"2025-12-28\"\n   * Â¶ÇÊûúÁî® new Date(\"2025-12-28\")ÔºåÊµèËßàÂô®ÂèØËÉΩËß£Èáä‰∏∫ UTC Êó∂Èó¥\n   * ÂØºËá¥ÊòæÁ§∫Êó∂ÂèòÊàê 2025-12-27ÔºàÊó∂Âå∫ÂÅèÁßªÔºâ\n   *\n   * Ëß£ÂÜ≥ÔºöÁõ¥Êé•‰ΩøÁî®Â≠óÁ¨¶‰∏≤ÁöÑ YYYY-MM-DD ÈÉ®ÂàÜ\n   */\n  parseLocalDate(dateString) {\n    // ÂêéÁ´ØÂèØËÉΩËøîÂõû \"2025-12-28\" Êàñ \"2025-12-28T10:30:00\"\n    // ÊèêÂèñ YYYY-MM-DD ÈÉ®ÂàÜ\n    if (!dateString) return '';\n    const parts = dateString.split('T')[0]; // ÂéªÊéâÊó∂Èó¥ÈÉ®ÂàÜ\n    return parts; // ËøîÂõû \"2025-12-28\"\n  }\n  /**\n   * Ê†ºÂºèÂåñÊó•Êúü‰∏∫ YYYY-MM-DD Â≠óÁ¨¶‰∏≤\n   */\n  formatDateToString(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  onDayClick(day) {\n    this.selectDay(day);\n  }\n  selectDay(day) {\n    if (!day.isCurrentMonth) return;\n    this.calendarDays.forEach(d => d.isSelected = false);\n    day.isSelected = true;\n    this.selectedDay = day;\n    console.log('Calendar View: ÈÄâ‰∏≠Êó•Êúü', this.formatDateToString(day.date), 'Êúâ', day.transactions.length, 'Êù°‰∫§Êòì');\n  }\n  closeDetails() {\n    this.calendarDays.forEach(d => d.isSelected = false);\n    this.selectedDay = null;\n  }\n  previousMonth() {\n    this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() - 1, 1);\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n  nextMonth() {\n    this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1);\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n  goToToday() {\n    this.currentDate = new Date();\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n  refresh() {\n    console.log('Calendar View: ÊâãÂä®Âà∑Êñ∞...');\n    this.loadMonthData();\n  }\n  getMonthName(month) {\n    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    return months[month];\n  }\n  getMonthYearString() {\n    return `${this.getMonthName(this.currentMonth)} ${this.currentYear}`;\n  }\n  formatCurrency(amount) {\n    return `$${Math.abs(amount).toFixed(2)}`;\n  }\n  formatShortCurrency(amount) {\n    const abs = Math.abs(amount);\n    if (abs >= 1000) {\n      return `$${(abs / 1000).toFixed(1)}K`;\n    }\n    return `$${abs.toFixed(0)}`;\n  }\n  formatAmount(amount) {\n    return amount.toFixed(2);\n  }\n  addTransactionForDay(day) {\n    const date = day ? this.formatDateToString(day.date) : undefined;\n    this.router.navigate(['/transactions/add'], {\n      queryParams: date ? {\n        date\n      } : {}\n    });\n  }\n  static {\n    this.…µfac = function CalendarViewComponent_Factory(t) {\n      return new (t || CalendarViewComponent)(i0.…µ…µdirectiveInject(i1.TransactionService), i0.…µ…µdirectiveInject(i2.Router), i0.…µ…µdirectiveInject(i2.ActivatedRoute));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: CalendarViewComponent,\n      selectors: [[\"app-calendar-view\"]],\n      decls: 45,\n      vars: 11,\n      consts: [[1, \"calendar-container\"], [1, \"today-summary-card\"], [1, \"summary-date\"], [1, \"net-amount\"], [1, \"income-expense-row\"], [1, \"amount-item\"], [1, \"label\"], [1, \"value\", \"positive\"], [1, \"value\", \"negative\"], [1, \"calendar-header\"], [1, \"nav-button\", 3, \"click\"], [1, \"calendar-title\"], [1, \"today-button\", 3, \"click\"], [1, \"weekday-header\"], [1, \"weekday\"], [1, \"calendar-grid\"], [\"class\", \"day-cell\", 3, \"today\", \"other-month\", \"has-data\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"day-cell\", 3, \"click\"], [1, \"day-number\"], [\"class\", \"day-amounts\", 4, \"ngIf\"], [1, \"day-amounts\"], [\"class\", \"income-amount\", 4, \"ngIf\"], [\"class\", \"expense-amount\", 4, \"ngIf\"], [1, \"income-amount\"], [1, \"expense-amount\"]],\n      template: function CalendarViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n          i0.…µ…µtext(3, \"Today's Summary\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"div\", 2);\n          i0.…µ…µtext(5);\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(6, \"div\", 3);\n          i0.…µ…µtext(7);\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"span\", 6);\n          i0.…µ…µtext(11, \"Income\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(12, \"span\", 7);\n          i0.…µ…µtext(13);\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(14, \"div\", 5)(15, \"span\", 6);\n          i0.…µ…µtext(16, \"Expense\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(17, \"span\", 8);\n          i0.…µ…µtext(18);\n          i0.…µ…µelementEnd()()()();\n          i0.…µ…µelementStart(19, \"div\", 9)(20, \"button\", 10);\n          i0.…µ…µlistener(\"click\", function CalendarViewComponent_Template_button_click_20_listener() {\n            return ctx.previousMonth();\n          });\n          i0.…µ…µtext(21, \"\\u2190\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(22, \"h2\", 11);\n          i0.…µ…µtext(23);\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(24, \"button\", 10);\n          i0.…µ…µlistener(\"click\", function CalendarViewComponent_Template_button_click_24_listener() {\n            return ctx.nextMonth();\n          });\n          i0.…µ…µtext(25, \"\\u2192\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(26, \"button\", 12);\n          i0.…µ…µlistener(\"click\", function CalendarViewComponent_Template_button_click_26_listener() {\n            return ctx.goToToday();\n          });\n          i0.…µ…µtext(27, \"Today\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(28, \"div\", 13)(29, \"div\", 14);\n          i0.…µ…µtext(30, \"Mon\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(31, \"div\", 14);\n          i0.…µ…µtext(32, \"Tue\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(33, \"div\", 14);\n          i0.…µ…µtext(34, \"Wed\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(35, \"div\", 14);\n          i0.…µ…µtext(36, \"Thu\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(37, \"div\", 14);\n          i0.…µ…µtext(38, \"Fri\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(39, \"div\", 14);\n          i0.…µ…µtext(40, \"Sat\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(41, \"div\", 14);\n          i0.…µ…µtext(42, \"Sun\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(43, \"div\", 15);\n          i0.…µ…µtemplate(44, CalendarViewComponent_div_44_Template, 4, 8, \"div\", 16);\n          i0.…µ…µelementEnd()();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(5);\n          i0.…µ…µtextInterpolate(ctx.todaySummary.date);\n          i0.…µ…µadvance();\n          i0.…µ…µclassProp(\"positive\", ctx.todaySummary.net >= 0)(\"negative\", ctx.todaySummary.net < 0);\n          i0.…µ…µadvance();\n          i0.…µ…µtextInterpolate1(\" \", ctx.formatCurrency(ctx.todaySummary.net), \" \");\n          i0.…µ…µadvance(6);\n          i0.…µ…µtextInterpolate(ctx.formatCurrency(ctx.todaySummary.income));\n          i0.…µ…µadvance(5);\n          i0.…µ…µtextInterpolate(ctx.formatCurrency(ctx.todaySummary.expense));\n          i0.…µ…µadvance(5);\n          i0.…µ…µtextInterpolate2(\"\", ctx.getMonthName(ctx.currentMonth), \" \", ctx.currentYear, \"\");\n          i0.…µ…µadvance(21);\n          i0.…µ…µproperty(\"ngForOf\", ctx.calendarDays);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf],\n      styles: [\".calendar-container[_ngcontent-%COMP%] {\\n  padding: 16px;\\n  background-color: #f5f5f5;\\n  min-height: calc(100vh - 60px);\\n  padding-bottom: 80px;\\n}\\n\\n.today-summary-card[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #F5D547 0%, #F5D547 100%);\\n  border-radius: 16px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n  box-shadow: 0 4px 12px rgba(245, 213, 71, 0.3);\\n}\\n.today-summary-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 600;\\n  color: #333;\\n  margin: 0 0 8px;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .summary-date[_ngcontent-%COMP%] {\\n  font-size: 13px;\\n  color: #666;\\n  margin-bottom: 12px;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .net-amount[_ngcontent-%COMP%] {\\n  font-size: 36px;\\n  font-weight: 700;\\n  margin-bottom: 16px;\\n  color: #333;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .net-amount.positive[_ngcontent-%COMP%] {\\n  color: #4CAF50;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .net-amount.negative[_ngcontent-%COMP%] {\\n  color: #F44336;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 16px;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%]   .amount-item[_ngcontent-%COMP%] {\\n  flex: 1;\\n  background: rgba(255, 255, 255, 0.8);\\n  border-radius: 12px;\\n  padding: 12px;\\n  text-align: center;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%]   .amount-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\\n  display: block;\\n  font-size: 13px;\\n  color: #666;\\n  margin-bottom: 4px;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%]   .amount-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\\n  display: block;\\n  font-size: 18px;\\n  font-weight: 600;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%]   .amount-item[_ngcontent-%COMP%]   .value.positive[_ngcontent-%COMP%] {\\n  color: #4CAF50;\\n}\\n.today-summary-card[_ngcontent-%COMP%]   .income-expense-row[_ngcontent-%COMP%]   .amount-item[_ngcontent-%COMP%]   .value.negative[_ngcontent-%COMP%] {\\n  color: #F44336;\\n}\\n\\n.calendar-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 16px;\\n  padding: 12px 16px;\\n  background: white;\\n  border-radius: 12px;\\n}\\n.calendar-header[_ngcontent-%COMP%]   .calendar-title[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 600;\\n  color: #333;\\n  margin: 0;\\n}\\n.calendar-header[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%], .calendar-header[_ngcontent-%COMP%]   .today-button[_ngcontent-%COMP%] {\\n  background: transparent;\\n  border: none;\\n  color: #333;\\n  font-size: 18px;\\n  cursor: pointer;\\n  padding: 8px;\\n  border-radius: 8px;\\n}\\n.calendar-header[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover, .calendar-header[_ngcontent-%COMP%]   .today-button[_ngcontent-%COMP%]:hover {\\n  background-color: #f5f5f5;\\n}\\n.calendar-header[_ngcontent-%COMP%]   .today-button[_ngcontent-%COMP%] {\\n  background-color: #F5D547;\\n  font-size: 14px;\\n  font-weight: 500;\\n  padding: 8px 16px;\\n}\\n.calendar-header[_ngcontent-%COMP%]   .today-button[_ngcontent-%COMP%]:hover {\\n  background-color: #E6C63D;\\n}\\n\\n.weekday-header[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(7, 1fr);\\n  gap: 4px;\\n  margin-bottom: 8px;\\n}\\n.weekday-header[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 13px;\\n  font-weight: 500;\\n  color: #999;\\n  padding: 8px 0;\\n}\\n\\n.calendar-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(7, 1fr);\\n  gap: 4px;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%] {\\n  aspect-ratio: 1;\\n  background: white;\\n  border-radius: 12px;\\n  padding: 8px;\\n  cursor: pointer;\\n  transition: all 0.2s;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell.today[_ngcontent-%COMP%] {\\n  background-color: #E8F5E9;\\n  border: 2px solid #4CAF50;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell.other-month[_ngcontent-%COMP%] {\\n  opacity: 0.3;\\n  cursor: default;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell.other-month[_ngcontent-%COMP%]:hover {\\n  transform: none;\\n  box-shadow: none;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell.has-data[_ngcontent-%COMP%] {\\n  border: 1px solid #F5D547;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  font-weight: 600;\\n  color: #333;\\n  margin-bottom: 4px;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-amounts[_ngcontent-%COMP%] {\\n  font-size: 10px;\\n  font-weight: 500;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-amounts[_ngcontent-%COMP%]   .income-amount[_ngcontent-%COMP%] {\\n  color: #4CAF50;\\n}\\n.calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-amounts[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%] {\\n  color: #F44336;\\n}\\n\\n@media (max-width: 768px) {\\n  .calendar-container[_ngcontent-%COMP%] {\\n    padding: 12px;\\n  }\\n  .calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%] {\\n    padding: 4px;\\n  }\\n  .calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%] {\\n    font-size: 12px;\\n  }\\n  .calendar-grid[_ngcontent-%COMP%]   .day-cell[_ngcontent-%COMP%]   .day-amounts[_ngcontent-%COMP%] {\\n    font-size: 9px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvdHJhbnNhY3Rpb25zL2NhbGVuZGFyLXZpZXcvY2FsZW5kYXItdmlldy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtFQUNBLDhCQUFBO0VBQ0Esb0JBQUE7QUFBRjs7QUFJQTtFQUNFLDZEQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4Q0FBQTtBQURGO0FBR0U7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQURKO0FBSUU7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0FBRko7QUFLRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQUhKO0FBS0k7RUFDRSxjQUFBO0FBSE47QUFNSTtFQUNFLGNBQUE7QUFKTjtBQVFFO0VBQ0UsYUFBQTtFQUNBLFNBQUE7QUFOSjtBQVFJO0VBQ0UsT0FBQTtFQUNBLG9DQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFOTjtBQVFNO0VBQ0UsY0FBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7QUFOUjtBQVNNO0VBQ0UsY0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBQVBSO0FBU1E7RUFDRSxjQUFBO0FBUFY7QUFVUTtFQUNFLGNBQUE7QUFSVjs7QUFnQkE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0FBYkY7QUFlRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7RUFDQSxTQUFBO0FBYko7QUFnQkU7RUFDRSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFkSjtBQWdCSTtFQUNFLHlCQUFBO0FBZE47QUFrQkU7RUFDRSx5QkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0FBaEJKO0FBa0JJO0VBQ0UseUJBQUE7QUFoQk47O0FBc0JBO0VBQ0UsYUFBQTtFQUNBLHFDQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0FBbkJGO0FBcUJFO0VBQ0Usa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsY0FBQTtBQW5CSjs7QUF3QkE7RUFDRSxhQUFBO0VBQ0EscUNBQUE7RUFDQSxRQUFBO0FBckJGO0FBdUJFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLG9CQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0FBckJKO0FBdUJJO0VBQ0UsMkJBQUE7RUFDQSx5Q0FBQTtBQXJCTjtBQXdCSTtFQUNFLHlCQUFBO0VBQ0EseUJBQUE7QUF0Qk47QUF5Qkk7RUFDRSxZQUFBO0VBQ0EsZUFBQTtBQXZCTjtBQXlCTTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQXZCUjtBQTJCSTtFQUNFLHlCQUFBO0FBekJOO0FBNEJJO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0FBMUJOO0FBNkJJO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0FBM0JOO0FBNkJNO0VBQ0UsY0FBQTtBQTNCUjtBQThCTTtFQUNFLGNBQUE7QUE1QlI7O0FBbUNBO0VBQ0U7SUFDRSxhQUFBO0VBaENGO0VBbUNBO0lBQ0UsWUFBQTtFQWpDRjtFQW1DRTtJQUNFLGVBQUE7RUFqQ0o7RUFvQ0U7SUFDRSxjQUFBO0VBbENKO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjYWxlbmRhci12aWV3LmNvbXBvbmVudC5zY3NzXG4uY2FsZW5kYXItY29udGFpbmVyIHtcbiAgcGFkZGluZzogMTZweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDYwcHgpO1xuICBwYWRkaW5nLWJvdHRvbTogODBweDtcbn1cblxuLy8gw6TCu8KKw6bCl8Klw6bCkcKYw6jCpsKBw6XCjcKhw6fCicKHXG4udG9kYXktc3VtbWFyeS1jYXJkIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI0Y1RDU0NyAwJSwgI0Y1RDU0NyAxMDAlKTtcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgcGFkZGluZzogMjBweDtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDI0NSwgMjEzLCA3MSwgMC4zKTtcblxuICBoMiB7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgY29sb3I6ICMzMzM7XG4gICAgbWFyZ2luOiAwIDAgOHB4O1xuICB9XG5cbiAgLnN1bW1hcnktZGF0ZSB7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGNvbG9yOiAjNjY2O1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gIH1cblxuICAubmV0LWFtb3VudCB7XG4gICAgZm9udC1zaXplOiAzNnB4O1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICBjb2xvcjogIzMzMztcblxuICAgICYucG9zaXRpdmUge1xuICAgICAgY29sb3I6ICM0Q0FGNTA7XG4gICAgfVxuXG4gICAgJi5uZWdhdGl2ZSB7XG4gICAgICBjb2xvcjogI0Y0NDMzNjtcbiAgICB9XG4gIH1cblxuICAuaW5jb21lLWV4cGVuc2Utcm93IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogMTZweDtcblxuICAgIC5hbW91bnQtaXRlbSB7XG4gICAgICBmbGV4OiAxO1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbiAgICAgIC5sYWJlbCB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGNvbG9yOiAjNjY2O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC52YWx1ZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG5cbiAgICAgICAgJi5wb3NpdGl2ZSB7XG4gICAgICAgICAgY29sb3I6ICM0Q0FGNTA7XG4gICAgICAgIH1cblxuICAgICAgICAmLm5lZ2F0aXZlIHtcbiAgICAgICAgICBjb2xvcjogI0Y0NDMzNjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyDDpsKXwqXDpcKOwobDpcKvwrzDqMKIwqpcbi5jYWxlbmRhci1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gIHBhZGRpbmc6IDEycHggMTZweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG5cbiAgLmNhbGVuZGFyLXRpdGxlIHtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBjb2xvcjogIzMzMztcbiAgICBtYXJnaW46IDA7XG4gIH1cblxuICAubmF2LWJ1dHRvbiwgLnRvZGF5LWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiAjMzMzO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgICB9XG4gIH1cblxuICAudG9kYXktYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjVENTQ3O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTZDNjNEO1xuICAgIH1cbiAgfVxufVxuXG4vLyDDpsKYwp/DpsKcwp/DpsKgwofDqcKiwphcbi53ZWVrZGF5LWhlYWRlciB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDcsIDFmcik7XG4gIGdhcDogNHB4O1xuICBtYXJnaW4tYm90dG9tOiA4cHg7XG5cbiAgLndlZWtkYXkge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBjb2xvcjogIzk5OTtcbiAgICBwYWRkaW5nOiA4cHggMDtcbiAgfVxufVxuXG4vLyDDpsKXwqXDpcKOwobDp8K9wpHDpsKgwrxcbi5jYWxlbmRhci1ncmlkIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNywgMWZyKTtcbiAgZ2FwOiA0cHg7XG5cbiAgLmRheS1jZWxsIHtcbiAgICBhc3BlY3QtcmF0aW86IDE7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAgICY6aG92ZXIge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgfVxuXG4gICAgJi50b2RheSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRThGNUU5O1xuICAgICAgYm9yZGVyOiAycHggc29saWQgIzRDQUY1MDtcbiAgICB9XG5cbiAgICAmLm90aGVyLW1vbnRoIHtcbiAgICAgIG9wYWNpdHk6IDAuMztcbiAgICAgIGN1cnNvcjogZGVmYXVsdDtcblxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLmhhcy1kYXRhIHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNGNUQ1NDc7XG4gICAgfVxuXG4gICAgLmRheS1udW1iZXIge1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgIH1cblxuICAgIC5kYXktYW1vdW50cyB7XG4gICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuXG4gICAgICAuaW5jb21lLWFtb3VudCB7XG4gICAgICAgIGNvbG9yOiAjNENBRjUwO1xuICAgICAgfVxuXG4gICAgICAuZXhwZW5zZS1hbW91bnQge1xuICAgICAgICBjb2xvcjogI0Y0NDMzNjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gw6XCk8KNw6XCusKUw6XCvMKPXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgLmNhbGVuZGFyLWNvbnRhaW5lciB7XG4gICAgcGFkZGluZzogMTJweDtcbiAgfVxuXG4gIC5jYWxlbmRhci1ncmlkIC5kYXktY2VsbCB7XG4gICAgcGFkZGluZzogNHB4O1xuXG4gICAgLmRheS1udW1iZXIge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cblxuICAgIC5kYXktYW1vdW50cyB7XG4gICAgICBmb250LXNpemU6IDlweDtcbiAgICB9XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["NavigationEnd","filter","i0","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µadvance","…µ…µtextInterpolate1","ctx_r2","formatShortCurrency","day_r2","income","expense","…µ…µtemplate","CalendarViewComponent_div_44_div_3_div_1_Template","CalendarViewComponent_div_44_div_3_div_2_Template","…µ…µproperty","…µ…µlistener","CalendarViewComponent_div_44_Template_div_click_0_listener","…µ…µrestoreView","_r1","$implicit","…µ…µnextContext","…µ…µresetView","onDayClick","CalendarViewComponent_div_44_div_3_Template","…µ…µclassProp","isToday","isCurrentMonth","…µ…µtextInterpolate","dayOfMonth","CalendarViewComponent","constructor","transactionService","router","route","currentDate","Date","currentMonth","getMonth","currentYear","getFullYear","calendarDays","selectedDay","isLoading","errorMessage","todaySummary","date","toISOString","split","net","ngOnInit","updateCurrentMonthYear","loadMonthData","routerSubscription","events","pipe","event","subscribe","queryParams","params","console","log","ngOnDestroy","unsubscribe","year","month","getTransactionsByMonth","next","transactions","length","generateCalendar","calculateTodaySummary","error","today","todayStr","formatDateToString","forEach","t","transDateStr","parseLocalDate","transactionDate","transactionType","amount","firstDay","lastDay","firstDayOfWeek","getDay","daysInMonth","getDate","totalDays","Math","ceil","setHours","i","dayNumber","dateStr","dayTransactions","totalIncome","totalExpense","calendarDay","dayOfWeek","netAmount","getTime","isSelected","push","daysWithData","d","dateString","parts","String","padStart","day","selectDay","closeDetails","previousMonth","nextMonth","goToToday","refresh","getMonthName","months","getMonthYearString","formatCurrency","abs","toFixed","formatAmount","addTransactionForDay","undefined","navigate","…µ…µdirectiveInject","i1","TransactionService","i2","Router","ActivatedRoute","selectors","decls","vars","consts","template","CalendarViewComponent_Template","rf","ctx","CalendarViewComponent_Template_button_click_20_listener","CalendarViewComponent_Template_button_click_24_listener","CalendarViewComponent_Template_button_click_26_listener","CalendarViewComponent_div_44_Template","…µ…µtextInterpolate2"],"sources":["D:\\code\\PersonalMoneyFlow\\frontend\\src\\app\\features\\transactions\\calendar-view\\calendar-view.component.ts","D:\\code\\PersonalMoneyFlow\\frontend\\src\\app\\features\\transactions\\calendar-view\\calendar-view.component.html"],"sourcesContent":["// calendar-view.component.ts - ‰øÆÂ§çÊó∂Âå∫ÈóÆÈ¢ò\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\nimport { TransactionService, Transaction } from '../../../shared/services/transaction.service';\nimport { filter, Subscription } from 'rxjs';\n\ninterface CalendarDay {\n  date: Date;\n  dayNumber: number;\n  dayOfMonth: number;\n  dayOfWeek: number;\n  totalIncome: number;\n  totalExpense: number;\n  income: number;\n  expense: number;\n  netAmount: number;\n  transactions: Transaction[];\n  isToday: boolean;\n  isCurrentMonth: boolean;\n  isSelected: boolean;\n}\n\n@Component({\n  selector: 'app-calendar-view',\n  templateUrl: './calendar-view.component.html',\n  styleUrls: ['./calendar-view.component.scss']\n})\nexport class CalendarViewComponent implements OnInit, OnDestroy {\n  currentDate: Date = new Date();\n  currentMonth: number = new Date().getMonth();\n  currentYear: number = new Date().getFullYear();\n  calendarDays: CalendarDay[] = [];\n  selectedDay: CalendarDay | null = null;\n  isLoading = false;\n  errorMessage = '';\n  \n  todaySummary = {\n    date: new Date().toISOString().split('T')[0],\n    income: 0,\n    expense: 0,\n    net: 0\n  };\n  \n  private routerSubscription?: Subscription;\n\n  constructor(\n    private transactionService: TransactionService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n    \n    this.routerSubscription = this.router.events\n      .pipe(filter(event => event instanceof NavigationEnd))\n      .subscribe(() => {\n        this.route.queryParams.subscribe(params => {\n          if (params['refresh'] === 'true') {\n            console.log('Calendar View: Ê£ÄÊµãÂà∞Âà∑Êñ∞ÂèÇÊï∞ÔºåÈáçÊñ∞Âä†ËΩΩ...');\n            this.loadMonthData();\n          }\n        });\n      });\n    \n    this.route.queryParams.subscribe(params => {\n      if (params['refresh'] === 'true') {\n        console.log('Calendar View: ÂàùÂßãÂà∑Êñ∞...');\n        this.loadMonthData();\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.routerSubscription?.unsubscribe();\n  }\n\n  updateCurrentMonthYear(): void {\n    this.currentMonth = this.currentDate.getMonth();\n    this.currentYear = this.currentDate.getFullYear();\n  }\n\n  loadMonthData(): void {\n    this.isLoading = true;\n    this.errorMessage = '';\n\n    const year = this.currentDate.getFullYear();\n    const month = this.currentDate.getMonth() + 1;\n\n    console.log(`Calendar View: Âä†ËΩΩ ${year}-${month} ÁöÑÊï∞ÊçÆ...`);\n\n    this.transactionService.getTransactionsByMonth(year, month).subscribe({\n      next: (transactions) => {\n        console.log(`Calendar View: Âä†ËΩΩÂà∞ ${transactions.length} Êù°‰∫§Êòì`);\n        console.log('Calendar View: ‰∫§ÊòìÊï∞ÊçÆÁ§∫‰æã:', transactions[0]);\n        this.generateCalendar(transactions);\n        this.calculateTodaySummary(transactions);\n        this.isLoading = false;\n      },\n      error: (error) => {\n        console.error('Calendar View: Âä†ËΩΩÂ§±Ë¥•:', error);\n        this.errorMessage = 'Êó†Ê≥ïÂä†ËΩΩÊúà‰ªΩÊï∞ÊçÆ';\n        this.generateCalendar([]);\n        this.isLoading = false;\n      }\n    });\n  }\n\n  calculateTodaySummary(transactions: Transaction[]): void {\n    const today = new Date();\n    const todayStr = this.formatDateToString(today);\n    \n    let income = 0;\n    let expense = 0;\n    \n    transactions.forEach(t => {\n      // üîß ‰øÆÂ§çÔºö‰ΩøÁî® parseLocalDate ÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢ò\n      const transDateStr = this.parseLocalDate(t.transactionDate);\n      \n      if (transDateStr === todayStr) {\n        if (t.transactionType === 'INCOME') {\n          income += t.amount;\n        } else {\n          expense += t.amount;\n        }\n      }\n    });\n    \n    this.todaySummary = {\n      date: todayStr,\n      income: income,\n      expense: expense,\n      net: income - expense\n    };\n    \n    console.log('Calendar View: ‰ªäÊó•Ê±áÊÄª', this.todaySummary);\n  }\n\n  /**\n   * ÁîüÊàêÊó•ÂéÜ - ‰øÆÂ§çÊó∂Âå∫ÈóÆÈ¢ò\n   */\n  generateCalendar(transactions: Transaction[]): void {\n    console.log('Calendar View: ÁîüÊàêÊó•ÂéÜ...');\n    \n    const year = this.currentDate.getFullYear();\n    const month = this.currentDate.getMonth();\n    \n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const firstDayOfWeek = firstDay.getDay();\n    const daysInMonth = lastDay.getDate();\n    const totalDays = Math.ceil((firstDayOfWeek + daysInMonth) / 7) * 7;\n    \n    this.calendarDays = [];\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    for (let i = 0; i < totalDays; i++) {\n      const dayNumber = i - firstDayOfWeek + 1;\n      const date = new Date(year, month, dayNumber);\n      const isCurrentMonth = dayNumber >= 1 && dayNumber <= daysInMonth;\n      \n      // üîß ÂÖ≥ÈîÆ‰øÆÂ§çÔºö‰ΩøÁî®Êú¨Âú∞Êó•ÊúüÂ≠óÁ¨¶‰∏≤ÊØîËæÉ\n      const dateStr = this.formatDateToString(date);\n      \n      const dayTransactions = transactions.filter(t => {\n        // üîß ‰øÆÂ§çÔºöÁõ¥Êé•‰ΩøÁî® transactionDate Â≠óÁ¨¶‰∏≤Ôºå‰∏çËΩ¨Êç¢‰∏∫ Date\n        const transDateStr = this.parseLocalDate(t.transactionDate);\n        return transDateStr === dateStr;\n      });\n      \n      let totalIncome = 0;\n      let totalExpense = 0;\n      \n      dayTransactions.forEach(t => {\n        if (t.transactionType === 'INCOME') {\n          totalIncome += t.amount;\n        } else {\n          totalExpense += t.amount;\n        }\n      });\n      \n      const calendarDay: CalendarDay = {\n        date: date,\n        dayNumber: date.getDate(),\n        dayOfMonth: date.getDate(),\n        dayOfWeek: date.getDay(),\n        totalIncome: totalIncome,\n        totalExpense: totalExpense,\n        income: totalIncome,\n        expense: totalExpense,\n        netAmount: totalIncome - totalExpense,\n        transactions: dayTransactions,\n        isToday: date.getTime() === today.getTime(),\n        isCurrentMonth: isCurrentMonth,\n        isSelected: false\n      };\n      \n      this.calendarDays.push(calendarDay);\n    }\n    \n    console.log('Calendar View: Êó•ÂéÜÁîüÊàêÂÆåÊàêÔºåÂÖ±', this.calendarDays.length, 'Â§©');\n    \n    // ÁªüËÆ°ÊúâÊï∞ÊçÆÁöÑÂ§©Êï∞\n    const daysWithData = this.calendarDays.filter(d => d.transactions.length > 0).length;\n    console.log('Calendar View: Êúâ‰∫§ÊòìÁöÑÂ§©Êï∞:', daysWithData);\n  }\n\n  /**\n   * üîß Êñ∞Â¢ûÔºöËß£ÊûêÊú¨Âú∞Êó•ÊúüÔºàÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢òÔºâ\n   * \n   * ÂêéÁ´ØËøîÂõû: \"2025-12-28\"\n   * Â¶ÇÊûúÁî® new Date(\"2025-12-28\")ÔºåÊµèËßàÂô®ÂèØËÉΩËß£Èáä‰∏∫ UTC Êó∂Èó¥\n   * ÂØºËá¥ÊòæÁ§∫Êó∂ÂèòÊàê 2025-12-27ÔºàÊó∂Âå∫ÂÅèÁßªÔºâ\n   * \n   * Ëß£ÂÜ≥ÔºöÁõ¥Êé•‰ΩøÁî®Â≠óÁ¨¶‰∏≤ÁöÑ YYYY-MM-DD ÈÉ®ÂàÜ\n   */\n  parseLocalDate(dateString: string): string {\n    // ÂêéÁ´ØÂèØËÉΩËøîÂõû \"2025-12-28\" Êàñ \"2025-12-28T10:30:00\"\n    // ÊèêÂèñ YYYY-MM-DD ÈÉ®ÂàÜ\n    if (!dateString) return '';\n    \n    const parts = dateString.split('T')[0]; // ÂéªÊéâÊó∂Èó¥ÈÉ®ÂàÜ\n    return parts; // ËøîÂõû \"2025-12-28\"\n  }\n\n  /**\n   * Ê†ºÂºèÂåñÊó•Êúü‰∏∫ YYYY-MM-DD Â≠óÁ¨¶‰∏≤\n   */\n  formatDateToString(date: Date): string {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  onDayClick(day: CalendarDay): void {\n    this.selectDay(day);\n  }\n\n  selectDay(day: CalendarDay): void {\n    if (!day.isCurrentMonth) return;\n    \n    this.calendarDays.forEach(d => d.isSelected = false);\n    day.isSelected = true;\n    this.selectedDay = day;\n    \n    console.log('Calendar View: ÈÄâ‰∏≠Êó•Êúü', this.formatDateToString(day.date), 'Êúâ', day.transactions.length, 'Êù°‰∫§Êòì');\n  }\n\n  closeDetails(): void {\n    this.calendarDays.forEach(d => d.isSelected = false);\n    this.selectedDay = null;\n  }\n\n  previousMonth(): void {\n    this.currentDate = new Date(\n      this.currentDate.getFullYear(),\n      this.currentDate.getMonth() - 1,\n      1\n    );\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n\n  nextMonth(): void {\n    this.currentDate = new Date(\n      this.currentDate.getFullYear(),\n      this.currentDate.getMonth() + 1,\n      1\n    );\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n\n  goToToday(): void {\n    this.currentDate = new Date();\n    this.updateCurrentMonthYear();\n    this.loadMonthData();\n  }\n\n  refresh(): void {\n    console.log('Calendar View: ÊâãÂä®Âà∑Êñ∞...');\n    this.loadMonthData();\n  }\n\n  getMonthName(month: number): string {\n    const months = [\n      'January', 'February', 'March', 'April', 'May', 'June',\n      'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    return months[month];\n  }\n\n  getMonthYearString(): string {\n    return `${this.getMonthName(this.currentMonth)} ${this.currentYear}`;\n  }\n\n  formatCurrency(amount: number): string {\n    return `$${Math.abs(amount).toFixed(2)}`;\n  }\n\n  formatShortCurrency(amount: number): string {\n    const abs = Math.abs(amount);\n    if (abs >= 1000) {\n      return `$${(abs / 1000).toFixed(1)}K`;\n    }\n    return `$${abs.toFixed(0)}`;\n  }\n\n  formatAmount(amount: number): string {\n    return amount.toFixed(2);\n  }\n\n  addTransactionForDay(day?: CalendarDay): void {\n    const date = day ? this.formatDateToString(day.date) : undefined;\n    this.router.navigate(['/transactions/add'], {\n      queryParams: date ? { date } : {}\n    });\n  }\n}\n","<!-- calendar-view.component.html -->\n<div class=\"calendar-container\">\n  \n  <!-- ‰ªäÊó•ÊëòË¶ÅÂç°Áâá -->\n  <div class=\"today-summary-card\">\n    <h2>Today's Summary</h2>\n    <div class=\"summary-date\">{{ todaySummary.date }}</div>\n    <div class=\"net-amount\" [class.positive]=\"todaySummary.net >= 0\" [class.negative]=\"todaySummary.net < 0\">\n      {{ formatCurrency(todaySummary.net) }}\n    </div>\n    <div class=\"income-expense-row\">\n      <div class=\"amount-item\">\n        <span class=\"label\">Income</span>\n        <span class=\"value positive\">{{ formatCurrency(todaySummary.income) }}</span>\n      </div>\n      <div class=\"amount-item\">\n        <span class=\"label\">Expense</span>\n        <span class=\"value negative\">{{ formatCurrency(todaySummary.expense) }}</span>\n      </div>\n    </div>\n  </div>\n\n  <!-- Êó•ÂéÜÂØºËà™ -->\n  <div class=\"calendar-header\">\n    <button class=\"nav-button\" (click)=\"previousMonth()\">‚Üê</button>\n    <h2 class=\"calendar-title\">{{ getMonthName(currentMonth) }} {{ currentYear }}</h2>\n    <button class=\"nav-button\" (click)=\"nextMonth()\">‚Üí</button>\n    <button class=\"today-button\" (click)=\"goToToday()\">Today</button>\n  </div>\n\n  <!-- ÊòüÊúüÊ†áÈ¢ò -->\n  <div class=\"weekday-header\">\n    <div class=\"weekday\">Mon</div>\n    <div class=\"weekday\">Tue</div>\n    <div class=\"weekday\">Wed</div>\n    <div class=\"weekday\">Thu</div>\n    <div class=\"weekday\">Fri</div>\n    <div class=\"weekday\">Sat</div>\n    <div class=\"weekday\">Sun</div>\n  </div>\n\n  <!-- Êó•ÂéÜÁΩëÊ†º -->\n  <div class=\"calendar-grid\">\n    <div class=\"day-cell\" \n         *ngFor=\"let day of calendarDays\"\n         [class.today]=\"day.isToday\"\n         [class.other-month]=\"!day.isCurrentMonth\"\n         [class.has-data]=\"day.income > 0 || day.expense > 0\"\n         (click)=\"onDayClick(day)\">\n      <div class=\"day-number\">{{ day.dayOfMonth }}</div>\n      <div class=\"day-amounts\" *ngIf=\"day.isCurrentMonth && (day.income > 0 || day.expense > 0)\">\n        <div class=\"income-amount\" *ngIf=\"day.income > 0\">\n          {{ formatShortCurrency(day.income) }}\n        </div>\n        <div class=\"expense-amount\" *ngIf=\"day.expense > 0\">\n          {{ formatShortCurrency(-day.expense) }}\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}